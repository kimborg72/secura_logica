---
import PageLayout from '@layouts/PageLayout.astro';
import HeroSimple from '@components/sections/HeroSimple.astro';
import ServiceCard from '@components/ui/ServiceCard.astro';
import CTABanner from '@components/sections/CTABanner.astro';
import { getCollection } from 'astro:content';

const services = (await getCollection('services')).sort((a, b) => a.data.order - b.data.order);
---

<PageLayout
  title="Tjänster"
  description="Cybersäkerhet och compliance-tjänster för samhällsviktiga verksamheter. NIS2, ISO 27001, CISO-as-a-Service och mer."
>
  <HeroSimple
    title="Våra tjänster"
    description="Vi täcker hela kedjan — från regelverkstolkning och gap-analys till implementering och löpande uppföljning."
    breadcrumbs={[{ label: 'Tjänster' }]}
  />

  <section class="section">
    <div class="container">
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {services.map((service, i) => (
          <div data-reveal data-delay={String((i % 3) + 1)}>
            <ServiceCard
              title={service.data.title}
              description={service.data.excerpt}
              href={`/tjanster/${service.data.slug}`}
            />
          </div>
        ))}
      </div>
    </div>
  </section>

  <CTABanner />
</PageLayout>
