---
import { getCollection } from 'astro:content';
import Tabs from '@components/ui/Tabs.astro';

const industriesData = (await getCollection('industries')).sort((a, b) => a.data.order - b.data.order);

const industries = industriesData.map((ind) => ({
  id: ind.data.id,
  label: ind.data.name,
  title: ind.data.displayTitle,
  description: ind.data.longDescription,
  challenges: ind.data.challenges,
}));

const tabs = industries.map((ind) => ({ id: ind.id, label: ind.label }));
---

<section class="section bg-surface">
  <div class="container">
    <div class="text-center max-w-2xl mx-auto mb-12" data-reveal>
      <p class="overline mb-3">Branscher</p>
      <h2>Fokus på samhällsviktig verksamhet</h2>
      <p class="lead mt-4">
        Vi arbetar med organisationer där kraven på säkerhet, integritet och förtroende är särskilt höga.
      </p>
    </div>

    <div data-reveal>
      <Tabs tabs={tabs}>
        {industries.map((ind, i) => (
          <div data-panel={ind.id} hidden={i !== 0 ? true : undefined}>
            <div class="grid md:grid-cols-2 gap-8 items-start">
              <div>
                <h3 class="mb-4">{ind.title}</h3>
                <p class="text-gray leading-relaxed">{ind.description}</p>
              </div>
              <div class="bg-white rounded-xl p-6 border border-border">
                <p class="text-sm font-semibold text-navy uppercase tracking-wider mb-4">Relevanta områden</p>
                <ul class="space-y-3">
                  {ind.challenges.map((challenge) => (
                    <li class="flex items-center gap-3 text-sm text-slate">
                      <svg aria-hidden="true" class="w-5 h-5 text-teal shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                      </svg>
                      {challenge}
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          </div>
        ))}
      </Tabs>
    </div>
  </div>
</section>
