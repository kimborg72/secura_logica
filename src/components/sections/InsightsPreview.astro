---
import Badge from '@components/ui/Badge.astro';
import Button from '@components/ui/Button.astro';

const insights = [
  {
    title: 'NIS2 och cybersäkerhetslagen — vad gäller nu?',
    excerpt: 'Den svenska cybersäkerhetslagen trädde i kraft januari 2025. Vi går igenom de viktigaste kraven och vad din organisation behöver göra.',
    category: 'NIS2',
    date: '2025-02-10',
    href: '/insikter',
  },
  {
    title: 'ISO 27001:2022 — de viktigaste förändringarna',
    excerpt: 'Den uppdaterade standarden medför nya kontroller och en omstrukturerad kontrollbilaga. Så påverkas ert LIS.',
    category: 'ISO 27001',
    date: '2025-01-22',
    href: '/insikter',
  },
  {
    title: 'CISO-as-a-Service: rätt val för medelstora organisationer?',
    excerpt: 'Inte alla organisationer behöver en heltids-CISO. Vi utforskar när en delad säkerhetsansvarig är det smartaste valet.',
    category: 'CISO',
    date: '2025-01-08',
    href: '/insikter',
  },
];

function formatDate(dateStr: string) {
  return new Date(dateStr).toLocaleDateString('sv-SE', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });
}
---

<section class="section">
  <div class="container">
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-end gap-4 mb-12" data-reveal>
      <div>
        <p class="overline mb-3">Insikter</p>
        <h2>Senaste nytt</h2>
      </div>
      <Button href="/insikter" variant="ghost">Alla insikter</Button>
    </div>

    <div class="grid md:grid-cols-3 gap-8">
      {insights.map((item, i) => (
        <article class="group" data-reveal data-delay={String(i + 1)}>
          <a href={item.href} class="block">
            <!-- Placeholder image -->
            <div class="aspect-[16/10] rounded-xl bg-surface mb-5 overflow-hidden">
              <div class="w-full h-full bg-gradient-to-br from-navy/5 to-copper/5 group-hover:scale-105 transition-transform duration-500"></div>
            </div>
            <div class="flex items-center gap-3 mb-3">
              <Badge text={item.category} variant="copper" />
              <time class="text-xs text-gray" datetime={item.date}>{formatDate(item.date)}</time>
            </div>
            <h3 class="text-lg font-semibold text-navy group-hover:text-copper transition-colors mb-2">
              {item.title}
            </h3>
            <p class="text-sm text-gray leading-relaxed">{item.excerpt}</p>
          </a>
        </article>
      ))}
    </div>
  </div>
</section>
